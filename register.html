<!DOCTYPE html>
<html>
<head>
    <title>הרשמה להגרלה</title>
    <link rel="stylesheet" href="site/styles.css">
    <link rel="stylesheet" href="site/personal.css">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="icon" type="image/x-icon" href="site/favicon.ico">
	<script src="site/messages.js"></script>
<style>
.refined a {
  margin: 0;
  padding: 0;
  border: none;
  background: none;
  color: inherit;
  text-decoration: underline;
}

.modal {
  max-height: 90%;
}

.refined a:hover {color: white;}

.refined h2 {margin-bottom: 0px;}

.refined p,li {
  padding-top: 5px;
  padding-bottom: 5px;
}

.note {
  font-size: 13px;
}
</style>
</head>
<body dir="rtl" style="background-color:#FFFEDB;">

  <script>
const urlParams = new URLSearchParams(window.location.search);
const mailValue = urlParams.get('sourcemail');

// מודעת שדרוגים ועדכונים
document.addEventListener("DOMContentLoaded", function() {
  // Create the overlay div element
  var overlay = document.createElement("div");
  overlay.classList.add("overlay");

  // Create the modal div element
  var modal = document.createElement("div");
  modal.classList.add("modal");
  
  modal.style.overflow = "auto";
  
  // Your JavaScript variable containing the value
  var sourceMail = 'memilel@gmail.com';

  // Create the iframe source URL with the variable
  var iframeSrc = 'https://docs.google.com/forms/d/e/1FAIpQLSf92occd-B1zfRIJ9UPaFvVeVNTfvu8gxK5M5HEbTGVgPWSUA/viewform?entry.181289636=' + mailValue + '&viewform?embedded=true';

  // Create the HTML content you want to add to the modal
  var htmlContent = `
<div class="refined">
    <h2>הרשמה מהירה</h2>
	<p>כדי שאתה וחברך תכנסו להגרלה, יש להירשם כעת</p>
    <iframe src="${iframeSrc}" style="max-width: 100%" width="400" height="400" frameborder="0" marginheight="0" marginwidth="0">טוען...</iframe>

	<p><b>מעוניין להגדיל את סיכויי הזכייה שלך פי 100?<a style="" id="instructionsButton">לחץ כאן כעת להוראות נוספות!</a></b></p>
    <br>
	<a class="confirm-button" href="https://nhlocal.github.io/shir-bot/">לסיום ומעבר לאתר</a>
</div>
  `;

  // Set the HTML content as the innerHTML of the modal
  modal.innerHTML = htmlContent;

  // Append the modal to the overlay
  overlay.appendChild(modal);

  // Append the overlay to the body
  document.body.appendChild(overlay);
  
// Add an event listener to the "Click here for more instructions" button
document.getElementById('instructionsButton').addEventListener('click', function() {
  // Reset the modal by clearing its content
  modal.innerHTML = '';

  // Create a new set of instructions
  var newInstructions = document.createElement('div');
  newInstructions.innerHTML = `
  <div class="refined">
    <h2>כיצד נכנסים להגרלה כפול 100?</h2>
	<p>תוכלו לעשות זאת במספר צעדים פשוטים</p>
    <ol style="list-style-type: none;">
      <li>⌀ <a class="refined" href="https://mail.google.com/mail/u/0/?view=cm&fs=1&tf=1&source=mailto&su=%E2%9C%A8+%D7%A8%D7%95%D7%A6%D7%99%D7%9D+%D7%9C%D7%94%D7%95%D7%A8%D7%99%D7%93+%D7%A1%D7%99%D7%A0%D7%92%D7%9C%D7%99%D7%9D+%D7%91%D7%90%D7%95%D7%A4%D7%9F+%D7%97%D7%95%D7%A4%D7%A9%D7%99+%D7%9E%D7%AA%D7%95%D7%9A+%D7%9E%D7%90%D7%92%D7%A8+%D7%A9%D7%9C+70%2C000+%D7%A9%D7%99%D7%A8%D7%99%D7%9D%3F+%D7%9B%D7%93%D7%90%D7%99+%D7%A9%D7%AA%D7%A6%D7%99%D7%A6%D7%95+%D7%A8%D7%92%D7%A2...&to=" target="_blank">לחצו כאן</a> לפתיחת הודעת מייל באופן אוטומטי</li>
	  <p style="display: none; font-size: 12px; padding: 0px; margin: 0px">לא עבד? <a class="refined" href="mailto:?subject=%E2%9C%A8+%D7%A8%D7%95%D7%A6%D7%99%D7%9D+%D7%9C%D7%94%D7%95%D7%A8%D7%99%D7%93+%D7%A1%D7%99%D7%A0%D7%92%D7%9C%D7%99%D7%9D+%D7%91%D7%90%D7%95%D7%A4%D7%9F+%D7%97%D7%95%D7%A4%D7%A9%D7%99+%D7%9E%D7%AA%D7%95%D7%9A+%D7%9E%D7%90%D7%92%D7%A8+%D7%A9%D7%9C+70%2C000+%D7%A9%D7%99%D7%A8%D7%99%D7%9D%3F+%D7%9B%D7%93%D7%90%D7%99+%D7%A9%D7%AA%D7%A6%D7%99%D7%A6%D7%95+%D7%A8%D7%92%D7%A2..." target="_blank">לחצו כאן</a></p>
	  <li>⌀ הכניסו כאן את כתובת המייל שלכם: <input dir="ltr" type="email" id="usermail" size="27" />
	  <p style="font-size: 12px; padding: 0px; margin: 0px">*הכנסת מייל תקין היא הכרחית כדי שנוכל להכניס אתכם להגרלה!</p></li>
      <li>⌀ <a class="refined" onclick="copyFormattedText()">לחצו כאן</a> להעתקת הודעה מוכנה ללוח</li>
      <li>⌀ הדביקו את התוכן בהודעת המייל</li>
      <li>⌀ שלחו לחבריכם</li><br>
    </ol>
	<b>כעת על כל אדם נוסף שיכנס לאתר דרככם, תכנסו להגרלה פעם נוספת!</b>
  </div>
  <a class="confirm-button" href="https://nhlocal.github.io/shir-bot/">אישור ומעבר לאתר</a>
<div class="refined">
<br>
  <a id="notesA">הבהרות חשובות</a>
  	<ol id="notes" class="note" style="display: none; list-style-type: none;">
	  <li>א. ההגרלה תיערך בט"ז חשון תשפ"ד, על ידי הבעלים של האתר. הודעה תימסר לזוכה במייל. מנויים קיימים יוכלו להעביר את הזכייה לחבר.</li>
	  <li>ב. על כל משתמש נוסף שיכנס דרך הקישור האישי שלכם, תיכנסו להגרלה פעם נוספת. אך הדבר מותנה ברישום של המשתמש בכניסה לאתר.</li>
	  <li>ג. הרישום הוא רק עבור משתמשים חדשים. לא ניתן להירשם פעמיים. (כלומר, אם החבר כבר נרשם דרך מישהו אחר, לא תכנסו להגרלה פעם נוספת)</li>
	  <li>ד. ניתן להיכנס להגרלה ללא הגבלת פעמים. המספר 100 מתייחס למקרה בו נרשמו דרככם 100 אנשים.</li>
	</ol>
</div>
  `;

  // Append the new instructions to the modal
  modal.appendChild(newInstructions);
  
// Find the element A by its text content
const elementA = document.getElementById('notesA');

// Add a click event listener to element A
elementA.addEventListener('click', function(event) {
  // Prevent the default behavior of the anchor element
  event.preventDefault();
  // Find the element OL with the id "notes"
  const elementOL = document.getElementById('notes');
  // Display or hide the element OL as needed
  if (elementOL.style.display === 'none') {
    elementOL.style.display = 'block';
  } else {
    elementOL.style.display = 'none';
  }
});  


});





});

function copyFormattedText() {

  // Get a reference to the input element by its id
  var inputElement = document.getElementById('usermail');

  // Get the value from the input element
  var userMail = inputElement.value;
  
  // Check if userMail is empty
  if (userMail.trim() === '') {
    alert('לא הוכנסה כתובת מייל!');
    return; // Exit the function
  }
 
  // Define the HTML content you want to copy
  var htmlContent = `
<!DOCTYPE html>
<html lang="he">
<head>
    <meta charset="UTF-8">
</head>
<body style="background-color: #ffffcc; direction: rtl;">
    <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" style="width: 900px; margin: auto;">
        <tr>
            <td>
                <table role="presentation" align="center" cellspacing="0" cellpadding="0" border="0" width="100%" style="background-color: #fff; max-width: 650px; margin: auto; border-radius: 5px 5px 0px 0px; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);">
                    <tr>
                        <td style="text-align: center;">
                            <img src="https://nhlocal.github.io/shir-bot/help/title.png" alt="תמונת האתר" width="700" style="display: block; margin: 0 auto; max-width: 100%; border: 5px;">
                            <h2 style="color: #362266;">שיר-בוט - המאגר המוזיקלי הגדול ביותר</h2>
                            <br>
                            <p style="font-size: 17px; line-height: 1.6; color: #555;">
                                יום טוב, יש לנו המלצה עבורכם!
                            </p>
                            <p style="font-size: 16px; line-height: 1.6; color: #555;">
                                התכוננו לצלול לעולם המוזיקה כמו שלא עשיתם מעולם. אנחנו היעד האחד שלכם לאוסף מדהים של למעלה מ-70,000 שירים המכסים מגוון רחב של ז'אנרים
                            </p>
                            <p style="font-size: 16px; line-height: 1.6; color: #555;">
                                שיר-בוט הוא אתר המכיל מגוון עצום של סגנונות מוזיקליים. מהלחנים המסורתיים של המוזיקה החסידית ועד לצלילים התוססים של המוזיקה המזרחית. מהקלאסיקה מחממת הלב של פרחי לונדון ובן-ציון שנקר, ועד לצלילים החדשניים של מוזיקה אלטרנטיבית, הכל במקום אחד
                            </p>
                            <img src="https://nhlocal.github.io/shir-bot/help/prtscrn.png" alt="תמונת האתר" width="700" style="display: block; margin: 0 auto; max-width: 100%; border: 5px;">
							<br>
                            <p style="font-size: 16px; line-height: 1.6; color: #555;">
                                אז בין אם אתם במצב רוח של נוסטלגיה או להוטים לגלות את הלהיטים האחרונים, שיר-בוט יספק אתכם. האוסף הנרחב שלנו משתרע על פני תקופות שונות, סגנונות ותרבויות שונות כדי לתת מענה לכל העדפה מוזיקלית
                            </p>
                            <p style="font-size: 16px; line-height: 1.6; color: #555;">
                                אל תפספסו את ההזדמנות לחקור את עולם המוזיקה המגוון באמצעות שיר-בוט. התחילו את המסע המוזיקלי שלכם עכשיו!
                            </p>
                            <!-- Add a button to visit the website -->
                            <p style="margin-top: 20px;">
                                <a href="https://nhlocal.github.io/shir-bot/register?sourcemail=${userMail}" style="display: inline-block; background-color: #5D3AB0; color: #fff; padding: 10px 20px; font-size: 20px; border-radius: 5px; text-decoration: none; transition: background-color 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;">בקרו באתר</a>
                            </p>
                    </tr>
                </table>
                <table role="presentation" align="center" cellspacing="0" cellpadding="0" border="0" width="100%" style="background-color: #D7C0FF; max-width: 650px; margin: auto; border-radius: 0px 0px 5px 5px; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);">
                    <tr>
                        <td style="text-align: center;">
                            <b style="font-size: 16px; line-height: 1.6; color: #555;">
                                מעוניינים להיכנס להגרלה על מנוי כפול לשנה<br>למאגר בדרייב המכיל 500 ג'יגה של מוזיקה ושמע<br>בשווי כולל של 300 ש"ח?<br>
                                <a href="https://nhlocal.github.io/shir-bot/register?sourcemail=${userMail}" style="margin-top: 8px; display: inline-block; background-color: white; color: #5D3AB0; padding: 3px; font-size: 16px; border-radius: 5px;">הירשמו כעת!</a>
                            </b><br><br>
                            <b style="font-size: 16px; line-height: 1.6; color: #4A2E8C; text-shadow: -1px 0 white, 0 1px white, 1px 0 white, 0 -1px white;">
                                רוצים להגדיל את סיכויי הזכיה שלכם?<br>היכנסו לקישור לעיל ושימו לב לפרטים!<br>כל משתמש נוסף שיכנס לאתר דרככם<br>יזכה אתכם בכניסה נוספת להגרלה!
                            </b><br>
                        </td>
                    </tr>
                </table>						
            </td>
        </tr>
    </table>
</body>
</html>

  `;

  // Create a temporary element to hold the HTML content
  var tempElement = document.createElement('div');
  tempElement.innerHTML = htmlContent;

  // Style the cloned element to match the original.
  tempElement.style.position = 'absolute';
  tempElement.style.left = '-9999px';

  // Append the temporary element to the document
  document.body.appendChild(tempElement);

  // Create a range and select the content
  var range = document.createRange();
  range.selectNodeContents(tempElement);
  var selection = window.getSelection();
  selection.removeAllRanges();
  selection.addRange(range);

  try {
    // Copy the selected content to the clipboard
    document.execCommand('copy');
    alert('ההודעה הועתקה ללוח!');
  } catch (err) {
    console.error('Unable to copy text: ', err);
  } finally {
    // Clean up
    selection.removeAllRanges();
    document.body.removeChild(tempElement);
  }
}

		
  </script>
</body>
</html>
