# ×©× ×”-Workflow
name: Deploy Jekyll site from /docs folder to GitHub Pages

on:
  # ××•×¤×¢×œ ×›××©×¨ ×™×© push ×œ×‘×¨×× ×¥' new-singles ×‘×œ×‘×“
  push:
    branches: ["new-singles"]

  # ×××¤×©×¨ ×”×¨×¦×” ×™×“× ×™×ª ××”×˜××‘ Actions
  workflow_dispatch:

# ×”×¨×©××•×ª × ×“×¨×©×•×ª ×œ×¤×¨×™×¡×”
permissions:
  contents: read
  pages: write
  id-token: write

# ×”×’×“×¨×ª ×× ×™×¢×ª ×¨×™×¦×•×ª ×›×¤×•×œ×•×ª
concurrency:
  group: "pages"
  cancel-in-progress: false

jobs:
  # ×¢×‘×•×“×ª ×”×‘× ×™×™×”
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout ğŸ›ï¸
        uses: actions/checkout@v4

      - name: Setup Pages âš™ï¸
        uses: actions/configure-pages@v5 # ×¤×¢×•×œ×” ×–×• ××›×™× ×” ××ª ×”×¡×‘×™×‘×” ×›×•×œ×œ baseurl × ×›×•×Ÿ

      - name: Build with Jekyll ğŸ—ï¸
        # ××©×ª××© ×‘×¤×¢×•×œ×” ×”××•×‘× ×™×ª ×©×œ GitHub Actions ×œ×‘× ×™×™×ª Jekyll
        uses: actions/jekyll-build-pages@v1
        with:
          source: ./docs # <-- ×©×™× ×•×™: ××¦×™×™×Ÿ ×©×”××§×•×¨ ×”×•× ×ª×™×§×™×™×ª docs
          destination: ./docs/_site # ×”×¤×œ×˜ ×™×”×™×” ×‘×ª×•×š ×ª×™×§×™×™×ª docs/_site (×™×—×¡×™×ª ×œ-source)

      - name: Upload artifact â¬†ï¸
        # ××¢×œ×” ××ª ×”×ª×•×¦××” ××ª×™×§×™×™×ª ×”×¤×œ×˜ ×”× ×›×•× ×”
        uses: actions/upload-pages-artifact@v3
        with:
          path: ./docs/_site # <-- ×©×™× ×•×™: ××¦×™×™×Ÿ ××ª ×”× ×ª×™×‘ ×”××“×•×™×§ ×œ××¨×˜×™×¤×§×˜ ×©× ×•×¦×¨

  # ×¢×‘×•×“×ª ×”×¤×¨×™×¡×” (×œ× ×“×•×¨×©×ª ×©×™× ×•×™)
  deploy:
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    runs-on: ubuntu-latest
    needs: build
    steps:
      - name: Deploy to GitHub Pages ğŸš€
        id: deployment
        uses: actions/deploy-pages@v4