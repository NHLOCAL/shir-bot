<!DOCTYPE html>
<html>
<head>
    <title>Dynamic Ad IFrame</title>
    <link rel="stylesheet" href="site/styles.css">
    <link rel="stylesheet" href="site/personal.css">
	<script src="site/messages.js"></script>
<style>
.refined a {
  margin: 0;
  padding: 0;
  border: none;
  background: none;
  color: inherit;
  text-decoration: underline;
}

.refined a:hover {color: white;}

.refined h2 {margin-bottom: 0px;}

.refined p,li {
  padding-top: 5px;
  padding-bottom: 5px;
}
</style>
</head>
<body dir="rtl" style="background-color:#FFFEDB;">
  <!-- This is where the ad iframe will be displayed -->

  <!-- Your JavaScript code to create and append the iframe goes here -->
  <script>
const urlParams = new URLSearchParams(window.location.search);
const mailValue = urlParams.get('sourcemail');

// מודעת שדרוגים ועדכונים
document.addEventListener("DOMContentLoaded", function() {
  // Create the overlay div element
  var overlay = document.createElement("div");
  overlay.classList.add("overlay");

  // Create the modal div element
  var modal = document.createElement("div");
  modal.classList.add("modal");
  
  // Your JavaScript variable containing the value
  var sourceMail = 'memilel@gmail.com';

  // Create the iframe source URL with the variable
  var iframeSrc = 'https://docs.google.com/forms/d/e/1FAIpQLSf92occd-B1zfRIJ9UPaFvVeVNTfvu8gxK5M5HEbTGVgPWSUA/viewform?entry.181289636=' + mailValue + '&viewform?embedded=true';

  // Create the HTML content you want to add to the modal
  var htmlContent = `
 <div class="refined">
    <h2>הרשמה מהירה</h2>
	<p>כדי שאתה וחברך תכנסו להגרלה, יש להירשם כעת</p>
    <iframe src="${iframeSrc}" width="400" height="400" frameborder="0" marginheight="0" marginwidth="0"></iframe>

	<p>מעוניין להגדיל את סיכויי הזכייה שלך?<a style="" id="instructionsButton">לחץ כאן כעת להוראות נוספות</a></p>
    <br>
	<a class="confirm-button" href="https://nhlocal.github.io/shir-bot/">לסיום ומעבר לאתר</a>
</div>
  `;

  // Set the HTML content as the innerHTML of the modal
  modal.innerHTML = htmlContent;

  // Append the modal to the overlay
  overlay.appendChild(modal);

  // Append the overlay to the body
  document.body.appendChild(overlay);
  
// Add an event listener to the "Click here for more instructions" button
document.getElementById('instructionsButton').addEventListener('click', function() {
  // Reset the modal by clearing its content
  modal.innerHTML = '';

  // Create a new set of instructions
  var newInstructions = document.createElement('div');
  newInstructions.innerHTML = `
  <div class="refined">
    <h2>כיצד נכנסים להגרלה</h2>
	<p>במספר צעדים פשוטים</p>
    <ol style="list-style-type: none;">
      <li><a class="refined" href="https://mail.google.com/mail/u/0/?view=cm&fs=1&tf=1&source=mailto&su=%E2%9C%A8+%D7%A8%D7%95%D7%A6%D7%99%D7%9D+%D7%9C%D7%94%D7%95%D7%A8%D7%99%D7%93+%D7%A9%D7%99%D7%A8%D7%99%D7%9D+%D7%91%D7%90%D7%95%D7%A4%D7%9F+%D7%97%D7%95%D7%A4%D7%A9%D7%99+%D7%91%D7%AA%D7%95%D7%9A+%D7%9E%D7%90%D7%92%D7%A8+%D7%A9%D7%9C+70%2C000+%D7%A9%D7%99%D7%A8%D7%99%D7%9D%3F+%D7%9B%D7%93%D7%90%D7%99+%D7%A9%D7%AA%D7%A6%D7%99%D7%A6%D7%95+%D7%A8%D7%92%D7%A2...&to=" target="_blank">לחצו כאן</a> לפתיחת הודעת מייל באופן אוטומטי</li>
      <li><a class="refined" onclick="copyFormattedText()">לחצו כאן</a> להעתקת הודעה מוכנה ללוח</li>
      <li>הדביקו את התוכן בהודעת המייל</li>
      <li>שלחו לחבריכם</li><br>
    </ol>
	<b>שימו לב:על כל אדם נוסף שנכנס לאתר דרככם, תכנסו להגרלה פעם נוספת!</b>
  </div>
  <a class="confirm-button" href="https://nhlocal.github.io/shir-bot/">אישור וסיום</a>
  `;

  // Append the new instructions to the modal
  modal.appendChild(newInstructions);
});

});




function copyFormattedText() {
  // Define the HTML content you want to copy
  var htmlContent = `
<center id="instructions">
<div class="instructions-container">
  <h3>הוראות שימוש</h3>
  <p><b>♪</b> חפש שיר באופן חופשי</p>
  <p><b>♪</b> לחץ על המספר הסידורי של השיר</p>
  <p><b>♪</b> זה יוביל אותך להודעת מייל, שלח אותה</p>
  <p><b>♪</b> תוך כדקה, ישלח אליך השיר המבוקש</p>
  <p class="disclaimer">שים לב שבמערכת זו ניתן להוריד סינגלים בלבד!</p>
  
  <button class="helpButton" id="helpButton">לחץ כאן לקבלת עזרה מפורטת</button>
</div>
</center>
  `;

  // Create a temporary element to hold the HTML content
  var tempElement = document.createElement('div');
  tempElement.innerHTML = htmlContent;

  // Style the cloned element to match the original.
  tempElement.style.position = 'absolute';
  tempElement.style.left = '-9999px';

  // Append the temporary element to the document
  document.body.appendChild(tempElement);

  // Create a range and select the content
  var range = document.createRange();
  range.selectNodeContents(tempElement);
  var selection = window.getSelection();
  selection.removeAllRanges();
  selection.addRange(range);

  try {
    // Copy the selected content to the clipboard
    document.execCommand('copy');
    alert('ההודעה הועתקה ללוח!');
  } catch (err) {
    console.error('Unable to copy text: ', err);
  } finally {
    // Clean up
    selection.removeAllRanges();
    document.body.removeChild(tempElement);
  }
}

		
  </script>
</body>
</html>
