---
layout: default
---
<div class="artists-list">
  <h2 class="page-main-title">{{ page.title }}</h2>
  <div style="text-align: center; margin-bottom: 20px;">
    <button id="sort-archive-button" class="btn btn-secondary" data-order="asc">
      <i class="fas fa-sort-amount-down"></i> מיון: מהישן לחדש
    </button>
  </div>
  {% assign archived_albums = site.data.generated_archive_settings.archive_albums_list %}
  {% if archived_albums and archived_albums.size > 0 %}
    {% assign current_year = "" %}
    {% for album_item in archived_albums %}
      {% assign album_year = album_item.name | split: ' ' | last %}
      {% if album_year != current_year %}
        {% unless forloop.first %}
          </ul>
        </div>
        {% endunless %}
        <div class="archive-year-group">
          <h2>{{ album_year }}</h2>
          <ul>
        {% assign current_year = album_year %}
      {% endif %}
      <li><a href="{{ site.baseurl }}{{ album_item.url }}">{{ album_item.name }}</a></li>
    {% endfor %}
      </ul>
    </div>
  {% else %}
    <p style="text-align: center;">לא נמצאו תכנים בארכיון.</p>
  {% endif %}
</div>
<script>
document.addEventListener('DOMContentLoaded', function() {
  const sortButton = document.getElementById('sort-archive-button');
  const archiveListContainer = document.querySelector('.artists-list');

  if (sortButton && archiveListContainer) {
    sortButton.addEventListener('click', function() {
      const currentOrder = this.dataset.order;
      const yearGroups = Array.from(archiveListContainer.querySelectorAll('.archive-year-group'));
      
      yearGroups.forEach(group => {
        const list = group.querySelector('ul');
        const listItems = Array.from(list.getElementsByTagName('li'));
        listItems.reverse();
        list.innerHTML = '';
        listItems.forEach(item => list.appendChild(item));
      });

      yearGroups.reverse();
      const parent = yearGroups[0].parentNode;
      yearGroups.forEach(group => parent.appendChild(group));

      if (currentOrder === 'asc') {
        this.dataset.order = 'desc';
        this.innerHTML = '<i class="fas fa-sort-amount-up"></i> מיון: מהחדש לישן';
      } else {
        this.dataset.order = 'asc';
        this.innerHTML = '<i class="fas fa-sort-amount-down"></i> מיון: מהישן לחדש';
      }
    });
  }
});
</script>